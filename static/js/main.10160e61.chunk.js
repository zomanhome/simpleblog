(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,a){e.exports=a(233)},231:function(e,t,a){},233:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(99),s=a.n(r),c=a(237),l=a(239),i=a(240),p=a(6),m=a(100),u=a(11),d=a(102),h=a.n(d),b=a(238),y=a(47),f=a(103),v=a(33),E=a.n(v),g=a(21),j=a.n(g),O="get_posts",k="get_post",w="delete_post",P="create_post",C="create_comment",N="https://simple-blog-api.crew.red";var x=Object(p.combineReducers)({posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return E.a.mapKeys(t.payload.data,"id");case k:return Object(f.a)({},e,Object(y.a)({},t.payload.data.id,t.payload.data));case w:return E.a.omit(e,t.payload);default:return e}},form:b.a}),_=a(22),S=a(23),D=a(27),A=a(24),T=a(26),F=a(236),M=a(235),I=a(234),J=function(e){function t(){return Object(_.a)(this,t),Object(D.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(S.a)(t,[{key:"renderField",value:function(e){var t=e.meta,a=t.touched,n=t.error,r="form-group ".concat(a&&n?"has-danger":"");return o.a.createElement("div",{className:r},o.a.createElement("label",null,e.label,":"),o.a.createElement(e.type,Object.assign({className:"form-control",type:"text"},e.input)),o.a.createElement("div",{className:"text-help"},a?n:""))}},{key:"onSubmit",value:function(e){var t=this;this.props.createPost(e,function(){t.props.history.push("/")})}},{key:"render",value:function(){var e=this.props.handleSubmit;return o.a.createElement("form",{onSubmit:e(this.onSubmit.bind(this))},o.a.createElement(F.a,{label:"Title",name:"title",type:"input",component:this.renderField}),o.a.createElement(F.a,{label:"Content",name:"body",type:"textarea",component:this.renderField}),o.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"),o.a.createElement(I.a,{className:"btn btn-danger",to:"/"},"Cancel"))}}]),t}(n.Component);var q=Object(M.a)({validate:function(e){var t={};return(!e.title||e.title.length<3)&&(t.title="Enter a title that is at leat 3 characters!"),t},form:"PostsNewForm"})(Object(u.b)(null,{createPost:function(e,t){var a=j.a.post("".concat(N,"/posts"),e).then(function(){return t()});return{type:P,payload:a}}})(J)),B=function(e){function t(){return Object(_.a)(this,t),Object(D.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;this.props.getPost(e)}},{key:"onDeleteClick",value:function(){var e=this,t=this.props.match.params.id;this.props.deletePost(t,function(){e.props.history.push("/")})}},{key:"addComment",value:function(){var e=this,t=this.props.match.params.id;this.props.createComment({postId:t,body:"Test comment"},function(){e.props.history.push("/posts/".concat(t))})}},{key:"render",value:function(){var e=this.props.post;return e?o.a.createElement("div",null,o.a.createElement(I.a,{to:"/"},"Back to All Posts"),o.a.createElement("button",{className:"btn btn-danger pull-xs-right",onClick:this.onDeleteClick.bind(this)},"Delete Post"),o.a.createElement("h3",null,e.title),o.a.createElement("p",null,e.body),o.a.createElement("i",null,"No comments here because API don't work correctly (comments in \"/posts/xx?_embed=comments\" is always empty). You can add a Test comment and see it's working"," ",o.a.createElement("a",{href:"https://simple-blog-api.crew.red/comments",target:"_blank",rel:"noopener noreferrer"},"here"),"."),o.a.createElement("button",{className:"btn btn-secondary pull-xs-right",onClick:this.addComment.bind(this)},"Add a Test comment")):o.a.createElement("div",null,"Loading...")}}]),t}(n.Component);var K=Object(u.b)(function(e,t){return{post:e.posts[t.match.params.id]}},{getPost:function(e){var t=j.a.get("".concat(N,"/posts/").concat(e,"?_embed=comments"));return{type:k,payload:t}},deletePost:function(e,t){return j.a.delete("".concat(N,"/posts/").concat(e)).then(function(){return t()}),{type:w,payload:e}},createComment:function(e,t){var a=j.a.post("".concat(N,"/comments"),e).then(function(){return t()});return{type:C,payload:a}}})(B),L=function(e){function t(){return Object(_.a)(this,t),Object(D.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.props.getPosts()}},{key:"renderPosts",value:function(){return E.a.map(this.props.posts,function(e){return o.a.createElement("li",{className:"list-group-item",key:e.id},o.a.createElement(I.a,{to:"/posts/".concat(e.id)},e.title))})}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("div",{className:"text-xs-right"},o.a.createElement(I.a,{className:"btn btn-primary",to:"/posts/new"},"Add a Post")),o.a.createElement("h3",null,"All Posts"),o.a.createElement("ul",{className:"list-group"},this.renderPosts()))}}]),t}(n.Component);var R=Object(u.b)(function(e){return{posts:e.posts}},{getPosts:function(){var e=j.a.get("".concat(N,"/posts"));return{type:O,payload:e}}})(L),W=(a(231),Object(m.composeWithDevTools)({})),Y=Object(p.createStore)(x,W(Object(p.applyMiddleware)(h.a)));s.a.render(o.a.createElement(u.a,{store:Y},o.a.createElement(c.a,null,o.a.createElement(l.a,null,o.a.createElement(i.a,{path:"/posts/new",component:q}),o.a.createElement(i.a,{path:"/posts/:id",component:K}),o.a.createElement(i.a,{path:"/",component:R})))),document.querySelector(".container"))}},[[106,1,2]]]);
//# sourceMappingURL=main.10160e61.chunk.js.map